
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù…Ø­Ø§ÙƒÙŠ Ø¨Ø³ÙŠØ·</title>

<style>
body {
  font-family: Arial;
  background: #f2f2f2;
  padding: 20px;
}
textarea {
  width: 100%;
  height: 180px;
  direction: ltr;
}
button {
  padding: 10px;
  margin: 5px 0;
}
#output {
  background: #000;
  color: #0f0;
  padding: 10px;
  min-height: 120px;
  white-space: pre-wrap;
}
</style>
</head>

<body>

<h2>ðŸ§  Ù…Ø­Ø§ÙƒÙŠ Ù„ØºØ© Ø¨Ø±Ù…Ø¬Ø© Ø¨Ø³ÙŠØ·</h2>

<textarea id="code">
LOAD A, 5
LOAD B, 3
ADD B
PRINT A
HALT
</textarea>

<br>
<button onclick="run()">ØªØ´ØºÙŠÙ„</button>
<button onclick="step()">Ø®Ø·ÙˆØ©</button>
<button onclick="resetSim()">Ø¥Ø¹Ø§Ø¯Ø©</button>

<div id="output"></div>

<script>
let A = 0;
let B = 0;
let program = [];
let pc = 0;

function resetSim() {
  A = 0;
  B = 0;
  pc = 0;
  program = [];
  output.textContent = "";
}

function loadProgram() {
  resetSim();
  program = code.value
    .split("\n")
    .map(l => l.trim())
    .filter(l => l && !l.startsWith(";"));
}

function executeLine(line) {
  const p = line.split(/[\s,]+/);

  switch (p[0]) {
    case "LOAD":
      if (p[1] === "A") A = parseInt(p[2]);
      if (p[1] === "B") B = parseInt(p[2]);
      break;

    case "ADD":
      if (p[1] === "A") A += A;
      if (p[1] === "B") A += B;
      break;

    case "PRINT":
      if (p[1] === "A") output.textContent += "A = " + A + "\n";
      if (p[1] === "B") output.textContent += "B = " + B + "\n";
      break;

    case "HALT":
      pc = program.length;
      output.textContent += "â›” ØªÙˆÙ‚Ù\n";
      break;
  }
}

function step() {
  if (program.length === 0) loadProgram();
  if (pc >= program.length) return;
  executeLine(program[pc]);
  pc++;
}

function run() {
  loadProgram();
  while (pc < program.length) {
    step();
  }
}
</script>

</body>
</html>
