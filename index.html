<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø­Ø§ÙƒÙŠ Ù„ØºØ© Ø¨Ø±Ù…Ø¬Ø© Ù„Ú¤Ù„ ÙˆØ§Ø­Ø¯</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f0f2f5;
            color: #333;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
            }
        }
        
        .panel {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            grid-column: 1 / -1;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3498db;
        }
        
        h2 {
            color: #2980b9;
            margin-top: 0;
        }
        
        textarea {
            width: 100%;
            height: 300px;
            font-family: monospace;
            font-size: 16px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            resize: vertical;
            direction: ltr;
            background-color: #f9f9f9;
        }
        
        .output {
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            min-height: 150px;
            white-space: pre-wrap;
            overflow-y: auto;
            direction: ltr;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        button#resetBtn {
            background-color: #e74c3c;
        }
        
        button#resetBtn:hover {
            background-color: #c0392b;
        }
        
        .registers, .memory {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .register, .mem-cell {
            background-color: #ecf0f1;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            font-family: monospace;
        }
        
        .register .label, .mem-cell .label {
            font-weight: bold;
            color: #2c3e50;
            font-size: 14px;
        }
        
        .register .value, .mem-cell .value {
            font-size: 18px;
            margin-top: 5px;
        }
        
        .instructions {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            grid-column: 1 / -1;
        }
        
        .instruction {
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px dashed #ddd;
        }
        
        code {
            background-color: #eee;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: monospace;
        }
        
        .highlight {
            background-color: #fffacd;
            padding: 2px;
            border-radius: 3px;
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            color: #7f8c8d;
            font-size: 14px;
            grid-column: 1 / -1;
            padding-top: 20px;
            border-top: 1px solid #ddd;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Ù…Ø­Ø§ÙƒÙŠ Ù„ØºØ© Ø¨Ø±Ù…Ø¬Ø© "Ù„Ú¤Ù„ ÙˆØ§Ø­Ø¯" (Level 1)</h1>
        
        <div class="panel">
            <h2>ğŸ“ ÙƒÙˆØ¯ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬</h2>
            <textarea id="codeEditor" placeholder="Ø§ÙƒØªØ¨ Ø¨Ø±Ù†Ø§Ù…Ø¬Ùƒ Ù‡Ù†Ø§...">
; Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø¨Ø³ÙŠØ· ÙŠØ¶Ø±Ø¨ Ø±Ù‚Ù…ÙŠÙ† ÙˆÙŠØ®Ø²Ù† Ø§Ù„Ù†ØªÙŠØ¬Ø©
; Ù„ØºØ© Ù„Ú¤Ù„ ÙˆØ§Ø­Ø¯ - Level 1 Programming Language

LOAD A, 5        ; ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ…Ø© 5 ÙÙŠ Ø§Ù„Ù…Ø³Ø¬Ù„ A
LOAD B, 3        ; ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ…Ø© 3 ÙÙŠ Ø§Ù„Ù…Ø³Ø¬Ù„ B
MULTIPLY         ; Ø¶Ø±Ø¨ A Ùˆ B (Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙŠ A)
STORE 0x10       ; ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙŠ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø°Ø§ÙƒØ±Ø© 0x10

LOAD A, 10       ; ØªØ­Ù…ÙŠÙ„ Ù‚ÙŠÙ…Ø© Ø¬Ø¯ÙŠØ¯Ø© ÙÙŠ A
ADD B            ; Ø¬Ù…Ø¹ A Ùˆ B (Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙŠ A)
STORE 0x11       ; ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙŠ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø°Ø§ÙƒØ±Ø© 0x11

PRINT "Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø¶Ø±Ø¨:"  ; Ø·Ø¨Ø§Ø¹Ø© Ù†Øµ
PRINTREG A       ; Ø·Ø¨Ø§Ø¹Ø© Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø³Ø¬Ù„ A
PRINTMEM 0x10    ; Ø·Ø¨Ø§Ø¹Ø© Ù‚ÙŠÙ…Ø© Ù…Ù† Ø§Ù„Ø°Ø§ÙƒØ±Ø©

HALT             ; Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬</textarea>
            
            <div class="controls">
                <button id="runBtn">â–¶ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬</button>
                <button id="stepBtn">â­ Ø®Ø·ÙˆØ© ÙˆØ§Ø­Ø¯Ø©</button>
                <button id="resetBtn">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
                <button id="exampleBtn">ğŸ“‹ Ù…Ø«Ø§Ù„ Ø¥Ø¶Ø§ÙÙŠ</button>
            </div>
        </div>
        
        <div class="panel">
            <h2>ğŸ“¤ Ø§Ù„Ù†Ø§ØªØ¬</h2>
            <div id="output" class="output"></div>
            
            <h2>ğŸ”„ Ø§Ù„Ù…Ø³Ø¬Ù„Ø§Øª (Registers)</h2>
            <div id="registers" class="registers">
                <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
            </div>
            
            <h2>ğŸ’¾ Ø§Ù„Ø°Ø§ÙƒØ±Ø© (Memory)</h2>
            <div id="memory" class="memory">
                <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
            </div>
        </div>
        
        <div class="instructions panel">
            <h2>ğŸ“– ØªØ¹Ù„ÙŠÙ…Ø§Øª Ù„ØºØ© Ù„Ú¤Ù„ ÙˆØ§Ø­Ø¯</h2>
            <div class="instruction"><code>LOAD X, value</code> - ØªØ­Ù…ÙŠÙ„ Ù‚ÙŠÙ…Ø© ÙÙŠ Ø§Ù„Ù…Ø³Ø¬Ù„ X (A, B, C, D)</div>
            <div class="instruction"><code>ADD X</code> - Ø¬Ù…Ø¹ Ø§Ù„Ù…Ø³Ø¬Ù„ A Ù…Ø¹ Ø§Ù„Ù…Ø³Ø¬Ù„ X (Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙŠ A)</div>
            <div class="instruction"><code>SUBTRACT X</code> - Ø·Ø±Ø­ Ø§Ù„Ù…Ø³Ø¬Ù„ X Ù…Ù† Ø§Ù„Ù…Ø³Ø¬Ù„ A (Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙŠ A)</div>
            <div class="instruction"><code>MULTIPLY</code> - Ø¶Ø±Ø¨ Ø§Ù„Ù…Ø³Ø¬Ù„ A ÙÙŠ Ø§Ù„Ù…Ø³Ø¬Ù„ B (Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙŠ A)</div>
            <div class="instruction"><code>DIVIDE</code> - Ù‚Ø³Ù…Ø© Ø§Ù„Ù…Ø³Ø¬Ù„ A Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³Ø¬Ù„ B (Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙŠ A)</div>
            <div class="instruction"><code>STORE address</code> - ØªØ®Ø²ÙŠÙ† Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø³Ø¬Ù„ A ÙÙŠ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø°Ø§ÙƒØ±Ø©</div>
            <div class="instruction"><code>LOADFROM address</code> - ØªØ­Ù…ÙŠÙ„ Ù‚ÙŠÙ…Ø© Ù…Ù† Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø³Ø¬Ù„ A</div>
            <div class="instruction"><code>PRINT "text"</code> - Ø·Ø¨Ø§Ø¹Ø© Ù†Øµ</div>
            <div class="instruction"><code>PRINTREG X</code> - Ø·Ø¨Ø§Ø¹Ø© Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø³Ø¬Ù„ X</div>
            <div class="instruction"><code>PRINTMEM address</code> - Ø·Ø¨Ø§Ø¹Ø© Ù‚ÙŠÙ…Ø© Ù…Ù† Ø§Ù„Ø°Ø§ÙƒØ±Ø©</div>
            <div class="instruction"><code>HALT</code> - Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬</div>
            <div class="instruction"><code>; ØªØ¹Ù„ÙŠÙ‚</code> - Ø£ÙŠ Ù†Øµ Ø¨Ø¹Ø¯ Ø§Ù„ÙØ§ØµÙ„Ø© Ø§Ù„Ù…Ù†Ù‚ÙˆØ·Ø© Ù‡Ùˆ ØªØ¹Ù„ÙŠÙ‚</div>
        </div>
        
        <footer>
            <p>ØªÙ… ØªØ·ÙˆÙŠØ± Ù‡Ø°Ø§ Ø§Ù„Ù…Ø­Ø§ÙƒÙŠ Ù„ØªÙˆØ¶ÙŠØ­ Ù…ÙØ§Ù‡ÙŠÙ… Ù„ØºØ© Ø¨Ø±Ù…Ø¬Ø© Ù…Ù† Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£ÙˆÙ„ (Level 1). Ø§Ù„Ù„ØºØ§Øª Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„Ù†ÙˆØ¹ ØªÙƒÙˆÙ† Ù‚Ø±ÙŠØ¨Ø© Ù…Ù† Ù„ØºØ© Ø§Ù„Ø¢Ù„Ø© ÙˆØ¨Ø³ÙŠØ·Ø© Ø¬Ø¯Ø§Ù‹.</p>
        </footer>
    </div>

    <script>
        // Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø­Ø§ÙƒÙŠ
        const simulator = {
            registers: { A: 0, B: 0, C: 0, D: 0 },
            memory: {},
            program: [],
            programCounter: 0,
            output: "",
            isRunning: false,
            
            init() {
                this.reset();
                this.updateDisplay();
            },
            
            reset() {
                this.registers = { A: 0, B: 0, C: 0, D: 0 };
                this.memory = {};
                this.program = [];
                this.programCounter = 0;
                this.output = "";
                this.isRunning = false;
                
                // ØªÙ‡ÙŠØ¦Ø© Ø¨Ø¹Ø¶ Ù‚ÙŠÙ… Ø§Ù„Ø°Ø§ÙƒØ±Ø©
                for (let i = 0x10; i <= 0x1F; i++) {
                    this.memory[i.toString(16)] = 0;
                }
            },
            
            loadProgram(code) {
                this.reset();
                const lines = code.split('\n');
                
                for (let line of lines) {
                    // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ø³Ø§ÙØ§Øª Ø§Ù„Ø²Ø§Ø¦Ø¯Ø© ÙˆØ§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª
                    line = line.trim();
                    const commentIndex = line.indexOf(';');
                    if (commentIndex !== -1) {
                        line = line.substring(0, commentIndex).trim();
                    }
                    
                    if (line) {
                        this.program.push(line);
                    }
                }
            },
            
            executeStep() {
                if (this.programCounter >= this.program.length) {
                    this.output += "âœ… Ø§Ù†ØªÙ‡Ù‰ ØªÙ†ÙÙŠØ° Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬\n";
                    this.isRunning = false;
                    return false;
                }
                
                const instruction = this.program[this.programCounter];
                this.programCounter++;
                
                return this.executeInstruction(instruction);
            },
            
            executeInstruction(instruction) {
                try {
                    const parts = instruction.split(/\s+/);
                    const cmd = parts[0].toUpperCase();
                    const args = parts.slice(1).join(' ').split(',').map(arg => arg.trim());
                    
                    switch(cmd) {
                        case 'LOAD':
                            if (args.length !== 2) throw new Error(`ØµÙŠØºØ© Ø®Ø§Ø·Ø¦Ø©: ${instruction}`);
                            const reg = args[0].toUpperCase();
                            const value = this.parseValue(args[1]);
                            
                            if (!['A', 'B', 'C', 'D'].includes(reg)) {
                                throw new Error(`Ù…Ø³Ø¬Ù„ ØºÙŠØ± ØµØ§Ù„Ø­: ${reg}`);
                            }
                            
                            this.registers[reg] = value;
                            break;
                            
                        case 'ADD':
                            if (args.length !== 1) throw new Error(`ØµÙŠØºØ© Ø®Ø§Ø·Ø¦Ø©: ${instruction}`);
                            const addReg = args[0].toUpperCase();
                            
                            if (!['A', 'B', 'C', 'D'].includes(addReg)) {
                                throw new Error(`Ù…Ø³Ø¬Ù„ ØºÙŠØ± ØµØ§Ù„Ø­: ${addReg}`);
                            }
                            
                            this.registers.A += this.registers[addReg];
                            break;
                            
                        case 'SUBTRACT':
                            if (args.length !== 1) throw new Error(`ØµÙŠØºØ© Ø®Ø§Ø·Ø¦Ø©: ${instruction}`);
                            const subReg = args[0].toUpperCase();
                            
                            if (!['A', 'B', 'C', 'D'].includes(subReg)) {
                                throw new Error(`Ù…Ø³Ø¬Ù„ ØºÙŠØ± ØµØ§Ù„Ø­: ${subReg}`);
                            }
                            
                            this.registers.A -= this.registers[subReg];
                            break;
                            
                        case 'MULTIPLY':
                            this.registers.A *= this.registers.B;
                            break;
                            
                        case 'DIVIDE':
                            if (this.registers.B === 0) throw new Error("Ø®Ø·Ø£: Ø§Ù„Ù‚Ø³Ù…Ø© Ø¹Ù„Ù‰ ØµÙØ±");
                            this.registers.A = Math.floor(this.registers.A / this.registers.B);
                            break;
                            
                        case 'STORE':
                            if (args.length !== 1) throw new Error(`ØµÙŠØºØ© Ø®Ø§Ø·Ø¦Ø©: ${instruction}`);
                            const address = this.parseAddress(args[0]);
                            this.memory[address] = this.registers.A;
                            break;
                            
                        case 'LOADFROM':
                            if (args.length !== 1) throw new Error(`ØµÙŠØºØ© Ø®Ø§Ø·Ø¦Ø©: ${instruction}`);
                            const loadAddress = this.parseAddress(args[0]);
                            
                            if (this.memory[loadAddress] === undefined) {
                                this.memory[loadAddress] = 0;
                            }
                            
                            this.registers.A = this.memory[loadAddress];
                            break;
                            
                        case 'PRINT':
                            if (!args[0]) throw new Error(`ØµÙŠØºØ© Ø®Ø§Ø·Ø¦Ø©: ${instruction}`);
                            let text = args.join(', ');
                            
                            // Ø¥Ø²Ø§Ù„Ø© Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø§Ù‚ØªØ¨Ø§Ø³ Ø¥Ø°Ø§ ÙˆØ¬Ø¯Øª
                            if (text.startsWith('"') && text.endsWith('"')) {
                                text = text.substring(1, text.length - 1);
                            }
                            
                            this.output += text + "\n";
                            break;
                            
                        case 'PRINTREG':
                            if (args.length !== 1) throw new Error(`ØµÙŠØºØ© Ø®Ø§Ø·Ø¦Ø©: ${instruction}`);
                            const printReg = args[0].toUpperCase();
                            
                            if (!['A', 'B', 'C', 'D'].includes(printReg)) {
                                throw new Error(`Ù…Ø³Ø¬Ù„ ØºÙŠØ± ØµØ§Ù„Ø­: ${printReg}`);
                            }
                            
                            this.output += `[${printReg}] = ${this.registers[printReg]}\n`;
                            break;
                            
                        case 'PRINTMEM':
                            if (args.length !== 1) throw new Error(`ØµÙŠØºØ© Ø®Ø§Ø·Ø¦Ø©: ${instruction}`);
                            const printAddress = this.parseAddress(args[0]);
                            
                            if (this.memory[printAddress] === undefined) {
                                this.memory[printAddress] = 0;
                            }
                            
                            this.output += `[MEM 0x${printAddress}] = ${this.memory[printAddress]}\n`;
                            break;
                            
                        case 'HALT':
                            this.output += "â¹ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬\n";
                            this.isRunning = false;
                            return false;
                            
                        default:
                            throw new Error(`ØªØ¹Ù„ÙŠÙ…Ø© ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙØ©: ${cmd}`);
                    }
                    
                    return true;
                } catch (error) {
                    this.output += `âŒ Ø®Ø·Ø£: ${error.message} (ÙÙŠ Ø§Ù„Ø³Ø·Ø± ${this.programCounter})\n`;
                    this.isRunning = false;
                    return false;
                }
            },
            
            parseValue(valueStr) {
                // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù‚ÙŠÙ…Ø© Ø³Ø¯Ø§Ø³ÙŠØ© Ø¹Ø´Ø±ÙŠØ© (ØªØ¨Ø¯Ø£ Ø¨Ù€ 0x)
                if (valueStr.startsWith('0x')) {
                    return parseInt(valueStr.substring(2), 16);
                }
                
                // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù‚ÙŠÙ…Ø© Ø¹Ø´Ø±ÙŠØ©
                const num = parseInt(valueStr, 10);
                if (isNaN(num)) throw new Error(`Ù‚ÙŠÙ…Ø© ØºÙŠØ± ØµØ§Ù„Ø­Ø©: ${valueStr}`);
                return num;
            },
            
            parseAddress(addressStr) {
                // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø³Ø¯Ø§Ø³ÙŠ Ø¹Ø´Ø±ÙŠ (ØªØ¨Ø¯Ø£ Ø¨Ù€ 0x)
                if (addressStr.startsWith('0x')) {
                    return addressStr.substring(2);
                }
                
                // ØªØ­ÙˆÙŠÙ„ Ø±Ù‚Ù… Ø¹Ø´Ø±ÙŠ Ø¥Ù„Ù‰ Ø³Ø¯Ø§Ø³ÙŠ Ø¹Ø´Ø±ÙŠ
                const num = parseInt(addressStr, 10);
                if (isNaN(num)) throw new Error(`Ø¹Ù†ÙˆØ§Ù† ØºÙŠØ± ØµØ§Ù„Ø­: ${addressStr}`);
                return num.toString(16);
            },
            
            run() {
                this.isRunning = true;
                this.output = "";
                
                while (this.isRunning) {
                    if (!this.executeStep()) {
                        break;
                    }
                    
                    // ÙˆÙ‚Ù Ù…Ø¤Ù‚Øª Ù„ØªØ¬Ù†Ø¨ Ø§Ù„ØªØ¬Ù…ÙŠØ¯ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø·ÙˆÙŠÙ„Ø§Ù‹
                    if (this.programCounter > 100) {
                        this.output += "âš ï¸ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªÙ†ÙÙŠØ° Ø¨Ø¹Ø¯ 100 Ø®Ø·ÙˆØ©\n";
                        this.isRunning = false;
                        break;
                    }
                }
                
                this.updateDisplay();
            },
            
            updateDisplay() {
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø§ØªØ¬
                document.getElementById('output').textContent = this.output;
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³Ø¬Ù„Ø§Øª
                const registersDiv = document.getElementById('registers');
                registersDiv.innerHTML = '';
                
                for (const [reg, value] of Object.entries(this.registers)) {
                    const registerEl = document.createElement('div');
                    registerEl.className = 'register';
                    registerEl.innerHTML = `
                        <div class="label">Ø§Ù„Ù…Ø³Ø¬Ù„ ${reg}</div>
                        <div class="value">${value}</div>
                    `;
                    registersDiv.appendChild(registerEl);
                }
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø°Ø§ÙƒØ±Ø©
                const memoryDiv = document.getElementById('memory');
                memoryDiv.innerHTML = '';
                
                // Ø¹Ø±Ø¶ Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ù…Ù† 0x10 Ø¥Ù„Ù‰ 0x1F
                for (let i = 0x10; i <= 0x1F; i++) {
                    const address = i.toString(16);
                    const value = this.memory[address] !== undefined ? this.memory[address] : 0;
                    
                    const memCell = document.createElement('div');
                    memCell.className = 'mem-cell';
                    memCell.innerHTML = `
                        <div class="label">0x${address}</div>
                        <div class="value">${value}</div>
                    `;
                    memoryDiv.appendChild(memCell);
                }
                
                // ØªÙ…ÙŠÙŠØ² Ø³Ø·Ø± Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠ ÙÙŠ Ù…Ø­Ø±Ø± Ø§Ù„Ù†Øµ
                this.highlightCurrentLine();
            },
            
            highlightCurrentLine() {
                const editor = document.getElementById('codeEditor');
                const lines = editor.value.split('\n');
                
                // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø³Ø§Ø¨Ù‚
                const codeDisplay = document.getElementById('output');
                
                if (this.programCounter > 0 && this.programCounter <= lines.length) {
                    // ÙÙŠ Ø§Ù„ÙˆØ§Ù‚Ø¹ØŒ Ø³Ù†Ù‚ÙˆÙ… ÙÙ‚Ø· Ø¨Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„Ù†Ø§ØªØ¬
                    if (this.programCounter <= this.program.length) {
                        codeDisplay.scrollTop = codeDisplay.scrollHeight;
                    }
                }
            }
        };
        
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…Ø­Ø§ÙƒÙŠ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', () => {
            simulator.init();
            
            // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„Ù„Ø£Ø²Ø±Ø§Ø±
            document.getElementById('runBtn').addEventListener('click', () => {
                const code = document.getElementById('codeEditor').value;
                simulator.loadProgram(code);
                simulator.run(
